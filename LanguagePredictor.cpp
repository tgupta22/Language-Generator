/* Results of running program are:
        Program 3: Which Language

        Letter Frequency Counts:
             Engl  Finn  Fren  Germ  Hung  Ital  Port  Span
        A:   6018  9416  6544  5068  7541  8935  9939 10052
        B:   1464   448  1081  2060  1746  1221  1173  1387
        C:   2144   636  3028  3126  1014  3865  2855  3222
        D:   3331  1013  2698  4592  2265  2945  3687  3815
        E:   9270  7187 12782 14779  8280  9364 10551 10861
        F:   1701   297  1101  1464   932  1099  1039   653
        G:   1333   187   772  2503  2975  1423   983   936
        H:   5244  2384  1004  4775  1687  1485  1413  1263
        I:   4653  8022  5583  7062  2961  8128  4179  3964
        J:     38  1331   538   148  1049     5   216   429
        K:    691  3952    28  1080  3551    51    19    18
        L:   3294  4648  4240  3089  4658  4814  2082  3985
        M:   2481  3526  3269  2861  3812  2790  4415  3021
        N:   4987  7958  5958  9026  4725  5966  4455  5704
        O:   6054  4219  5315  2208  3529  8668  8898  7605
        P:   1000  1331  2297   466   448  2060  1862  1842
        Q:    121    78   907    84    77   548   954   883
        R:   4518  1784  5986  5955  2802  5357  5328  5706
        S:   4943  5425  6898  5852  4538  4863  6774  6468
        T:   7055  7620  6025  5477  5632  5373  3729  3932
        U:   2590  4226  5373  3327   963  3081  3840  3591
        V:    657  1784  1566   661  1297  1287  1351   893
        W:   1926   120    78  1797   138   141    68    61
        X:    112    45   328    89    49    42   260    91
        Y:   1637  1403   247   169  1998   216    65   891
        Z:     15     3   343   939  2742   490   314   301

        Letter frequency order:
             Engl  Finn  Fren  Germ  Hung  Ital  Port  Span
                E     A     E     E     E     E     E     E
                T     I     S     N     A     A     A     A
                O     N     A     I     T     O     O     O
                A     T     T     R     N     I     S     S
                H     E     R     S     L     N     R     R
                N     S     N     T     S     T     N     N
                S     L     I     A     M     R     M     L
                I     U     U     H     K     S     I     I
                R     O     O     D     O     L     U     T
                D     K     L     U     G     C     T     D
                L     M     M     C     I     U     D     U
                U     H     C     L     R     D     C     C
                M     R     D     M     Z     M     L     M
                C     V     P     G     D     P     P     P
                W     Y     V     O     Y     H     H     B
                F     J     F     B     B     G     V     H
                Y     P     B     W     H     V     B     G
                B     D     H     F     V     B     F     V
                G     C     Q     K     J     F     G     Y
                P     B     G     Z     C     Q     Q     Q
                K     F     J     V     U     Z     Z     F
                V     G     Z     P     F     Y     X     J
                Q     W     X     Y     P     W     J     Z
                X     Q     Y     J     W     K     W     X
                J     X     W     X     Q     X     Y     W
                Z     Z     K     Q     X     J     K     K

        Copy and paste a paragraph of text to be analyzed, followed by ^z (PC) or ^d (Mac):
Ma per arrivare a un agreement bisogna essere in due. E dato che il governo intende resistere sui numeri della manovra, Ã¨
necessario offrire garanzie allâ€™Europa e ai mercati. PerciÃ² sono stati stabiliti due capisaldi: uno tecnico, lâ€™altro piÃ¹
politico. La riduzione strutturale del debito viene fissato come un Â«obiettivo strategicoÂ», non a caso sottolineato da Di
Maio dopo il vertice. La linea dellâ€™esecutivo Ã¨ che per far ripartire lâ€™Italia sia necessario Â«cambiare approccioÂ» con una
manovra espansiva Â«dopo anni di cure rigoriste senza risultatiÂ», ma s

        A:51 B:5 C:20 D:15 E:55 F:4 G:6 H:2 I:54 J:0 K:0 L:22 M:10 N:29 O:39 P:13 Q:0 R:37 S:28 T:31 U:15 V:9 W:0 X:0 Y:0 Z:3

        Letter frequency order:
             Engl  Finn  Fren  Germ  Hung  Ital  Port  Span  User
                E     A     E     E     E     E     E     E     E
                T     I     S     N     A     A     A     A     I
                O     N     A     I     T     O     O     O     A
                A     T     T     R     N     I     S     S     O
                H     E     R     S     L     N     R     R     R
                N     S     N     T     S     T     N     N     T
                S     L     I     A     M     R     M     L     N
                I     U     U     H     K     S     I     I     S
                R     O     O     D     O     L     U     T     L
                D     K     L     U     G     C     T     D     C
                L     M     M     C     I     U     D     U     D
                U     H     C     L     R     D     C     C     U
                M     R     D     M     Z     M     L     M     P
                C     V     P     G     D     P     P     P     M
                W     Y     V     O     Y     H     H     B     V
                F     J     F     B     B     G     V     H     G
                Y     P     B     W     H     V     B     G     B
                B     D     H     F     V     B     F     V     F
                G     C     Q     K     J     F     G     Y     Z
                P     B     G     Z     C     Q     Q     Q     H
                K     F     J     V     U     Z     Z     F     J
                V     G     Z     P     F     Y     X     J     K
                Q     W     X     Y     P     W     J     Z     Q
                X     Q     Y     J     W     K     W     X     W
                J     X     W     X     Q     X     Y     W     X
                Z     Z     K     Q     X     J     K     K     Y

               60    78    16    50    94    10    18    13  <--- Difference (This line is not part of expected output, but is helpful!)

        Language is Italian

 */

// I am submitting program #3 on Monday, as guided by Professor Reed. I recieved an extension due to family emergency. 
// Please, do let me know if you have any questions.
// Thank you!

#include <iostream>
#include <cctype>       // For the letter checking functions
#include <fstream>      // For file input
#include <iomanip>      // For setw
#include <cstdlib>
#include <cstring>
#include <sstream>
using namespace std;

//-------------------------------------------------------------------------------------------------
#define  LIMIT 26
#define LANGUAGES 8    // Max array size, which is the number of languages



// I am making this function for sorting stable/bubble sort in this case, used in Stage #2.

void swap(int &check1 , int &check2)
{
    int temp = check1 ;
    check1 = check2 ;
    check2 = temp ;
}

void stableSort(int SortedLetterNumber[][LIMIT] )
{
   
for(int counter = 0; counter < LIMIT; counter++)
  {
    for ( int x = 0; x < LANGUAGES; x++)
    {
      for ( int y = 0; y < (LIMIT- 1); y++)
      {
        if (SortedLetterNumber[x][y] < SortedLetterNumber[x][y+1])
        {
          swap(SortedLetterNumber[x][y], SortedLetterNumber[x][y+1]);
         
        }
       
       }
     }
 } 
}

//-------------------------------------------------------------------------------------------------

// Below I have made a fucntion for the introduction which has the output to be printed.


void intro()
{
   cout << setw(9) << "Engl" << setw(6) << "Finn"
          << setw(6) << "Fren" << setw(6) << setw(6) << "Germ" 
          << setw(6) << "Hung" << setw(6) << setw(6) << "Ital" 
          << setw(6) << "Port" << setw(6) << setw(6) << "Span"<< endl;
}
 
//-------------------------------------------------------------------------------------------------

// Below I am creating a function that converts sorted numbers into letters, used in Stage #2.

void numberToLetter(int letterBoard[][26], int  SortedLetterNumber[][26], char check[][26], char letters[], int LIMIT2, int LANGUAGES2) 
{


    for(int y = 0; y < LIMIT2; y++)
    {
      int x = 0;

      cout << setw(9);

      for(int i = 0; i < LANGUAGES2; i++)
      {

          for(int j = 0; j < LIMIT2; j++)
          {


             if(letterBoard[i][j] == SortedLetterNumber[x][y])
             {
                       // cout <<  letters[i] << setw(6);
                 letterBoard[i][j] = -1; 
                 check[i][y] = letters[j];
                 x++;
              }      // end of while loop
              else
              {   
                continue;
              }

          }      // end of for with j < LIMIT
      }      // end of for with i < LANGUAGES            
  }
  
  for(int i = 0; i < LIMIT; i++)
      {
          cout << setw(9);
          for(int k = 0; k < LANGUAGES; k++)
          {
              
              cout <<  check[k][i] << setw(6);
          }
        cout << endl;
      }
  }  

//-------------------------------------------------------------------------------------------------


// This function is being used in Stage #3, to accomodate for spacing when user inputs a paragraph of text.

     void checkSpacing(char check[][26], char userCol[26], int LIMIT3, int LANGUAGES3)
     {

        for ( int k=0; k<LIMIT3; k++)
             {
                cout << setw(8);
                for ( int l=0; l<LANGUAGES3; l++)
                {  
                // See if it is a printable character and if there were any of that character
                   if ( check[l][k] != '\0' ) 
                   {
                    //It willdisplay the number of occurrences

                      cout<<check[ l][k] << setw(6);
                      if(l == 7)
                      {
                         cout << userCol[k];
                      }
                   }
                }
              cout<<endl;
               cout<<setw(6); 
            }
             }

//-------------------------------------------------------------------------------------------------

// Below I am using this fucntion in stage #4 to check the diffrence between the languages and letters.

void checkDiffinLanguages(char check[][26], char userCol[26],int diffinLanguage[8], int LIMIT4, int LANGUAGES4)
{
     for ( int j = 0; j<LANGUAGES4; j++) 
       {

         // if letterCounts2 = 0

          for ( int i = 0; i<LIMIT4; i++) 
          {
               for(int n = 0; n < LIMIT; n++)
             {         

             if(check[j][n] == userCol[i]) {

                if(abs(i-n) >= 5)       // Here I will be checking the difference between the langauage array and the letters array of the user
               { 
                diffinLanguage[j] += abs(i-n);

               }
             }
          }
       }
       }
    }

//-------------------------------------------------------------------------------------------------

// In this function, I am comparing user column when user inputs a paragraph in Stage #3.

  void  compareUserOutput ( int letterCounts2[8],  char userCol[26], int newValue, int newValue2, int  LIMIT4)
    { 
       
      for(int tracer = 0; tracer < LIMIT4; tracer++)
        {
            for ( int n = 0; n < LIMIT4; n++)
            {
            
            while (letterCounts2[n] < letterCounts2[n+1]) 
            {
               
              newValue = letterCounts2[n];
              letterCounts2[n] = letterCounts2[n+1];
              letterCounts2[n+1] = newValue;

            
            while ( userCol[n] < userCol[n+1])
            {
              newValue2 = userCol[n];
              userCol[n]= userCol[n+1];
              userCol[n+1]= newValue2;
              
              
            }
            }
          } 
        }
    }
  

//-------------------------------------------------------------------------------------------------



int main()
{
   ifstream inputFileStream;  // declare the input file stream
  // int lettersArray[ LIMIT];  // count occurrences of characters
   int letterBoard[LANGUAGES][LIMIT];
   int SortedLetterNumber[LANGUAGES][LIMIT];
   int SortedLetterNumber2[LANGUAGES][LIMIT];
   char c = ' ';              // input character
   

  // Below I have listed arrays and integers used in my program.
   char letters[LIMIT];
   char check[LANGUAGES][LIMIT];
   char userCol[LIMIT];
   char firstInput;

    int letterCounts[LIMIT];
    int letterCounts2[LIMIT];
    int diffinLanguage[8]; // This checks the difference between the languages
    int choice;
    int newValue;
    int newValue2;


//-------------------------------------------------------------------------------------------------
  
   
	string fileName [8] = {"MacbethEnglish.txt", "MacbethFinnish.txt", "MacbethFrench.txt", "MacbethGerman.txt", "MacbethHungarian.txt", "MacbethItalian.txt", "MacbethPortuguese.txt", "MacbethSpanish.txt" };
    
    cout << "Program 3: Which Language." << endl;
    cout << endl;

    cout <<"Select from the following stages of output to display:" << endl;
    cout << " 1. Letter frequency counts" << endl;                          
    cout << " 2. Letter frequency order" << endl;                            
    cout << " 3. Get user input and display frequency counts" << endl;       
    cout << " 4. Get user input, display frequency counts, and display language" << endl; 
    cout << " 0. Exit the program" << endl;    
    cout << "Your choice --> " << endl;

    
    
    
    cin >> choice;
    cin.ignore();
  
  // I am using if statments in every stage to be able to display the menu and output specefic output assigned to specefic choice.
    
    if(choice == 1 || choice == 2 || choice == 3 || choice == 4) 
    {
    
    
     cout << "Letter Frequency Counts: " << endl;
     
      // Below I am calling intro function I made earlier.
     intro();
          
    }
  
  // The loop below is beimg used to assign incrementing and displaying  alphabets 
      for(int k = 0; k<LIMIT; k++)
      {
        letters[k] = char (k+'A');
       cout << letters[k] << ": " ; 
    
          if (choice == 1 || choice == 2 || choice == 3);
    {
      
    }
        for (int j=0; j<LANGUAGES; j++)
        {

// open input file and verify
   inputFileStream.open( fileName[j].c_str());   // Convert C++ string to expected C-style string 
   if( !inputFileStream.is_open()) 
   {
   	 //cout << "Could not find input file.  Exiting..." << endl;
   	 exit( -1);
   } // Closing if

   // initialize lettersArray count values 
   
     for ( int i =0; i<LIMIT; i++)
     {
            letterBoard[j][i] = 0;
            SortedLetterNumber[j][i] = 0;
     }
     
   //Process input one character at at time, echoing input
   // Note that the input skips leading spaces, which is why we don't see
   // them as part of the output.
  // cout << "Reading characters from a file... " << endl;
   while( inputFileStream >> c) 
   {
      // convert alphabetic input characters to upper case
      if( isalpha( c)) 
      {
          c = toupper( c);
          letterBoard[j][ c-'A'] = letterBoard[j][ c-'A'] + 1; // update letter count, using the character as the index
         
      } //Closing if
    } //Closing while  
         
          cout  << setw(6) << letterBoard[j][k] << "";
         
   
         // display the character and the number of occurences
       
          // Closing the files.
      inputFileStream.close();
      

        }
       cout << endl;
      }
  
  //-------------------------------------------------------------------------------------------------
  
  
  // Stage 2
  
 
  if(choice >= 2)
  {
     
     cout << "Letter Frequency Order: " << endl;
    
    
    // Below I am calling intro function I made earlier. 
     intro();
          
    // In the loop below, I am just assigning the sorted values to the letter board. 
    
      for (int m = 0; m < LIMIT; m++)
      {
            for (int n = 0; n < LANGUAGES; n++)
            {
                    SortedLetterNumber[n][m] = letterBoard[n][m];
                    SortedLetterNumber2[n][m] = letterBoard[n][m];
                   
            }    // end of for with j < LIMIT
        
      }     // end of for with i < LANGUAGES
  
    // Below I am calling my sort functionswhich I created outside main.
    
    stableSort(SortedLetterNumber);
    stableSort(SortedLetterNumber2);
    
    cout << endl;
  
    // Here I am calling numberToLetter function
    
    numberToLetter(letterBoard, SortedLetterNumber, check, letters, LIMIT, LANGUAGES);
 

  }       // end of if with choice >= 2
  
    
//-------------------------------------------------------------------------------------------------
    
  
  // Stage 3
  
   // The loop below is beimg used to assign incremeting and displaying alphabets.
  for (int m = 0; m < LIMIT; m++) {
      userCol[m] = m + 'A';      
  }

   if(choice >= 3)
  {
    cout << "Copy and paste a paragraph of text to be analyzed, followed by ^z (PC) or ^d (Mac): ";
    cout << endl;
    
    for (int m=0; m<LIMIT; m++) 
      {
        letterCounts[ m] = 0;
      }
      
  // Here I am calling a user for input.
      
     while( cin>>firstInput)
        {
            // convert alphabetic input characters to upper case
            if( isalpha( firstInput)) {
                firstInput= toupper( firstInput);
                letterCounts[ firstInput - 'A'] = letterCounts[firstInput - 'A'] +1; // update letter count, using the character as the index
                // cout << c << " ";    // Takes too long to display when enabled
            }
         }
         
         for(int m = 0; m<LIMIT; m++)
         {
          
          cout << char (m+'A') << ": " << letterCounts[m] << " " ; 
         }
         
         
        // cout << endl;
         // Here I am displaying alphabets with specefic paragraph insterted by the user, Italian in this case.
       
      cout << endl;
      
       for (int j  = 0; j < LIMIT; j++)
      {
        letterCounts2[j] = letterCounts[j];
      }     // end of for with j < LIMIT
      
      
      // Below I am calling a function that compares the user output.
     compareUserOutput ( letterCounts2, userCol, newValue, newValue2, LIMIT);
     
    
      cout << "Letter frequency order:" << endl;
        cout<<setw(8)<<"    Engl"<<"  Finn"<<"  Fren"<<"  Germ"<<"  Hung"<<"  Ital"<<"  Port"<<"  Span" << "  User"<<endl;
        cout<<setw(6);
         cout << endl;
      // Below I am calling a function that checks for spacing when user inputs a paragraph of text.
      checkSpacing( check, userCol, LIMIT, LANGUAGES);
  
        cout<<endl;
        cout<<setw(6); 
     }
  
  //-------------------------------------------------------------------------------------------------
  
    
   // Stage 4
  
  
  
   if (choice >= 4)
    {
      
     string languages[8] = {"English", "Finnish", "French", "German", "Hungarian", "Italian", "Portuguese", "Spanish"};
    
    // Creating a for loop to check, difference in languages.
    
    for ( int n = 0; n<LANGUAGES; n++ )
    {
       diffinLanguage[n] = 0;
       
   }
   
       // Below I am calling the function that to check the diffrence between the languages and letters.
       
     checkDiffinLanguages (check, userCol, diffinLanguage, LIMIT, LANGUAGES );

        int leastValue = 0;
       leastValue =  2147483647;     // This the value of maximum integer in C++
            int valueIndex = 0;
            for(int k = 0; k < 8; k++)
            {
                if(diffinLanguage[k] < leastValue)
                {
                    leastValue = diffinLanguage[k];     
                    valueIndex =k;
                }   

            } 
           cout << "Language is " << languages[valueIndex] << endl;
          }



  return 0;
}
